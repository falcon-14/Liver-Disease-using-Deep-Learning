{% extends "base.html" %}

{% block content %}
<div class="row">
    <!-- Prediction Result -->
    <div class="col s12">
        <div class="card">
            <div class="card-content">
                <span class="card-title">Prediction Result</span>
                <div class="{% if 'Positive' in prediction %}red lighten-4{% else %}green lighten-4{% endif %} p-4">
                    <p class="flow-text">Prediction: {{ prediction }}</p>
                    <p>Confidence: {{ "%.2f"|format(probability) }}%</p>
                    <p class="grey-text">Timestamp: {{ timestamp }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Detox Challenge -->
    <div class="col s12 m6">
        <div class="card blue-grey lighten-5">
            <div class="card-content">
                <span class="card-title">
                    <i class="material-icons left">fitness_center</i>
                    Your Daily Liver Health Challenge
                </span>
                <div class="section">
                    <h6 class="blue-text">{{ detox_challenge.title }}</h6>
                    <p>{{ detox_challenge.description }}</p>
                    <div class="row">
                        <div class="col s6">
                            <div class="card-panel">
                                <span class="blue-text">Duration</span>
                                <p>{{ detox_challenge.duration }}</p>
                            </div>
                        </div>
                        <div class="col s6">
                            <div class="card-panel">
                                <span class="blue-text">Difficulty</span>
                                <p>{{ detox_challenge.difficulty }}</p>
                            </div>
                        </div>
                    </div>
                    <h6>Benefits:</h6>
                    <ul class="collection">
                        {% for benefit in detox_challenge.benefits %}
                        <li class="collection-item">{{ benefit }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Personalized Recipe -->
    <div class="col s12 m6">
        <div class="card green lighten-5">
            <div class="card-content">
                <span class="card-title">
                    <i class="material-icons left">restaurant</i>
                    Your Liver-Healthy Recipe
                </span>
                <div class="section">
                    <h6 class="green-text">{{ recipe.name }}</h6>
                    
                    <div class="row">
                        <div class="col s6">
                            <div class="card-panel">
                                <span class="green-text">Preparation Time</span>
                                <p>{{ recipe.preparation_time }}</p>
                            </div>
                        </div>
                        <div class="col s6">
                            <div class="card-panel">
                                <span class="green-text">Difficulty</span>
                                <p>{{ recipe.difficulty }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h6>Ingredients:</h6>
                        <ul class="collection">
                            {% for ingredient in recipe.ingredients %}
                            <li class="collection-item">
                                <i class="material-icons tiny">restaurant_menu</i>
                                {{ ingredient }}
                            </li>
                            {% endfor %}
                        </ul>
                    </div>

                    <div class="section">
                        <h6>Instructions:</h6>
                        <ol class="collection">
                            {% for step in recipe.instructions %}
                            <li class="collection-item">
                                <span class="badge">Step {{ loop.index }}</span>
                                {{ step }}
                            </li>
                            {% endfor %}
                        </ol>
                    </div>

                    <div class="section">
                        <h6>Health Benefits:</h6>
                        <ul class="collection">
                            {% for benefit in recipe.health_benefits %}
                            <li class="collection-item">
                                <i class="material-icons tiny">favorite</i>
                                {{ benefit }}
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Button -->
    <div class="col s12 center-align">
        <a href="{{ url_for('home') }}" class="btn waves-effect waves-light blue darken-1">
            <i class="material-icons left">refresh</i>
            Make Another Prediction
        </a>
    </div>
</div>

<!-- Add custom styles for better spacing and visual appeal -->
<style>
    .card-panel {
        padding: 12px;
        margin: 8px 0;
    }
    
    .collection-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .collection-item i {
        color: #2196f3;
    }
    
    .section {
        margin: 20px 0;
    }
    
    .card-title i {
        margin-right: 8px;
    }
    
    .prediction-result {
        padding: 20px;
        border-radius: 4px;
        margin: 20px 0;
    }
    
    .flow-text {
        font-size: 1.5rem;
    }
</style>
{% endblock %}